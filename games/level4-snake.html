<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫—É –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö –±—É–∫–≤ -->
    <meta charset="UTF-8">
    <!-- –î–µ–ª–∞–µ–º —Å–∞–π—Ç —É–¥–æ–±–Ω—ã–º –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <title>üêç –£—Ä–æ–≤–µ–Ω—å 4: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ó–º–µ–π–∫–∞</title>
    
    <!-- üé® –í–°–¢–†–û–ï–ù–ù–´–ï –°–¢–ò–õ–ò CSS -->
    <style>
        /* === –°–ë–†–û–° –°–¢–ê–ù–î–ê–†–¢–ù–´–• –°–¢–ò–õ–ï–ô === */
        * {
            margin: 0;              /* —É–±–∏—Ä–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            padding: 0;             /* —É–±–∏—Ä–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            box-sizing: border-box; /* —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–∫–ª—é—á–∞—é—Ç –≥—Ä–∞–Ω–∏—Ü—ã –∏ –æ—Ç—Å—Ç—É–ø—ã */
        }

        /* === –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò –°–¢–†–ê–ù–ò–¶–´ === */
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;  /* –¥–µ—Ç—Å–∫–∏–π —à—Ä–∏—Ñ—Ç */
            background: linear-gradient(135deg, #2c3e50, #34495e, #2c3e50);  /* —Ç–µ–º–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            background-size: 400% 400%;     /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ */
            min-height: 100vh;              /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ = –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
            display: flex;                  /* –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–ª–µ–∫—Å–±–æ–∫—Å */
            flex-direction: column;         /* —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Å—Ç–æ–ª–±–∏–∫ */
            align-items: center;            /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ */
            justify-content: center;        /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
            color: white;                   /* –±–µ–ª—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
            animation: backgroundMove 20s ease infinite;  /* –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–∞ */
            padding: 20px;                  /* –æ—Ç—Å—Ç—É–ø—ã –æ—Ç –∫—Ä–∞–µ–≤ */
        }

        /* === –ê–ù–ò–ú–ê–¶–ò–Ø –î–í–ò–ñ–ï–ù–ò–Ø –§–û–ù–ê === */
        @keyframes backgroundMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* === –ö–ù–û–ü–ö–ê –í–û–ó–í–†–ê–¢–ê –î–û–ú–û–ô === */
        .home-button {
            position: fixed;        /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è */
            top: 20px;              /* –æ—Ç—Å—Ç—É–ø –æ—Ç –≤–µ—Ä—Ö–∞ */
            left: 20px;             /* –æ—Ç—Å—Ç—É–ø –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è */
            width: 60px;            /* —à–∏—Ä–∏–Ω–∞ */
            height: 60px;           /* –≤—ã—Å–æ—Ç–∞ */
            border: none;           /* —É–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É */
            border-radius: 50%;     /* –¥–µ–ª–∞–µ–º –∫—Ä—É–≥–ª–æ–π */
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);  /* –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            color: white;           /* –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            font-size: 1.5em;       /* —Ä–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ */
            cursor: pointer;        /* –∫—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
            transition: all 0.3s ease;  /* –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);  /* —Ç–µ–Ω—å */
            z-index: 1000;          /* –ø–æ–≤–µ—Ä—Ö –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        }

        .home-button:hover {
            transform: scale(1.1) rotate(360deg);  /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º */
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.5);  /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–µ–Ω—å */
        }

        /* === –ó–ê–ì–û–õ–û–í–û–ö –ò–ì–†–´ === */
        .game-header {
            text-align: center;     /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            margin-bottom: 30px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        .game-title {
            font-size: 3.5em;       /* –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);  /* —Ç–µ–Ω—å –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
            margin-bottom: 10px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
            color: #4CAF50;         /* –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –∫–∞–∫ —É –∑–º–µ–π–∫–∏ */
            animation: titleSlither 4s ease-in-out infinite;  /* –∞–Ω–∏–º–∞—Ü–∏—è –∑–º–µ–∏–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è */
        }

        /* === –ê–ù–ò–ú–ê–¶–ò–Ø –ó–ú–ï–ò–ù–û–ì–û –î–í–ò–ñ–ï–ù–ò–Ø –ó–ê–ì–û–õ–û–í–ö–ê === */
        @keyframes titleSlither {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(1deg) scale(1.02); }
            50% { transform: rotate(0deg) scale(1.05); }
            75% { transform: rotate(-1deg) scale(1.02); }
        }

        .game-subtitle {
            font-size: 1.3em;       /* —Ä–∞–∑–º–µ—Ä –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∞ */
            color: rgba(255, 255, 255, 0.8);  /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–µ–ª—ã–π */
            margin-bottom: 20px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        /* === –ü–ê–ù–ï–õ–¨ –°–ß–ï–¢–ê === */
        .score-panel {
            background: rgba(255, 255, 255, 0.1);  /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border-radius: 20px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            padding: 15px 30px;     /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            margin-bottom: 20px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
            display: flex;          /* —Ñ–ª–µ–∫—Å–±–æ–∫—Å –¥–ª—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
            gap: 40px;              /* –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
            flex-wrap: wrap;        /* –ø–µ—Ä–µ–Ω–æ—Å–∏–º –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –µ—Å–ª–∏ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è */
            justify-content: center; /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            backdrop-filter: blur(15px);  /* —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);  /* —Ç–µ–Ω—å */
            border: 2px solid rgba(76, 175, 80, 0.3);  /* –∑–µ–ª–µ–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
        }

        .score-item {
            text-align: center;     /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        }

        .score-label {
            display: block;         /* –∫–∞–∂–¥—ã–π –Ω–∞ —Å–≤–æ–µ–π —Å—Ç—Ä–æ–∫–µ */
            font-size: 1em;         /* —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            color: rgba(255, 255, 255, 0.7);  /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –±–µ–ª—ã–π */
            margin-bottom: 5px;     /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        .score-value {
            display: block;         /* –∫–∞–∂–¥—ã–π –Ω–∞ —Å–≤–æ–µ–π —Å—Ç—Ä–æ–∫–µ */
            font-size: 1.8em;       /* –∫—Ä—É–ø–Ω—ã–π —Ä–∞–∑–º–µ—Ä */
            font-weight: bold;      /* –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç */
            color: #4CAF50;         /* –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç */
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);  /* —Ç–µ–Ω—å */
        }

        /* === –ò–ì–†–û–í–û–ï –ü–û–õ–ï (CANVAS) === */
        .game-container {
            background: rgba(255, 255, 255, 0.05);  /* –æ—á–µ–Ω—å —Å–ª–∞–±—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border-radius: 15px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            padding: 20px;          /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            backdrop-filter: blur(10px);  /* —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);  /* –∫—Ä–∞—Å–∏–≤–∞—è —Ç–µ–Ω—å */
            border: 3px solid rgba(76, 175, 80, 0.4);  /* –∑–µ–ª–µ–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
            margin-bottom: 20px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        /* === –•–û–õ–°–¢ –î–õ–Ø –†–ò–°–û–í–ê–ù–ò–Ø –ò–ì–†–´ === */
        #gameCanvas {
            border: 2px solid #4CAF50;  /* –∑–µ–ª–µ–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ —Ö–æ–ª—Å—Ç–∞ */
            border-radius: 10px;    /* —Å–ª–µ–≥–∫–∞ —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            background: #1a1a1a;    /* —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω —Ö–æ–ª—Å—Ç–∞ */
            display: block;         /* –±–ª–æ—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç */
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);  /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–µ–Ω—å */
        }

        /* === –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø === */
        .controls-panel {
            background: rgba(255, 255, 255, 0.1);  /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
            border-radius: 15px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            padding: 20px;          /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            backdrop-filter: blur(10px);  /* —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);  /* —Ç–µ–Ω—å */
            text-align: center;     /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            max-width: 500px;       /* –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            margin: 0 auto;         /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º */
        }

        .controls-title {
            font-size: 1.3em;       /* —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
            color: white;           /* –±–µ–ª—ã–π —Ü–≤–µ—Ç */
            margin-bottom: 15px;    /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
        }

        /* === –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø === */
        .control-buttons {
            display: grid;          /* —Å–µ—Ç–∫–∞ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            grid-template-areas:    /* –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±–ª–∞—Å—Ç–∏ —Å–µ—Ç–∫–∏ */
                ". up ."
                "left pause right"
                ". down .";
            grid-template-columns: 1fr 1fr 1fr;  /* —Ç—Ä–∏ —Ä–∞–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ */
            gap: 12px;              /* –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            max-width: 200px;       /* –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            margin: 0 auto 20px auto;  /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º */
        }

        .control-button {
            width: 55px;            /* —à–∏—Ä–∏–Ω–∞ –∫–Ω–æ–ø–∫–∏ */
            height: 55px;           /* –≤—ã—Å–æ—Ç–∞ –∫–Ω–æ–ø–∫–∏ */
            border: none;           /* —É–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É */
            border-radius: 12px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            background: linear-gradient(45deg, #4CAF50, #8BC34A);  /* –∑–µ–ª–µ–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            color: white;           /* –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            font-size: 1.8em;       /* —Ä–∞–∑–º–µ—Ä —Å–∏–º–≤–æ–ª–∞ */
            cursor: pointer;        /* –∫—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
            transition: all 0.2s ease;  /* –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
            box-shadow: 0 5px 10px rgba(76, 175, 80, 0.3);  /* —Ç–µ–Ω—å */
            user-select: none;      /* –∑–∞–ø—Ä–µ—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ */
            font-family: inherit;   /* –Ω–∞—Å–ª–µ–¥—É–µ–º —à—Ä–∏—Ñ—Ç */
        }

        /* === –ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï –ö–ù–û–ü–û–ö –í –°–ï–¢–ö–ï === */
        .control-button.up { grid-area: up; }
        .control-button.down { grid-area: down; }
        .control-button.left { grid-area: left; }
        .control-button.right { grid-area: right; }
        .control-button.pause { 
            grid-area: pause; 
            background: linear-gradient(45deg, #FF9800, #FFB74D);  /* –æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –ø–∞—É–∑—ã */
            font-size: 1.5em;
        }

        /* === –≠–§–§–ï–ö–¢–´ –î–õ–Ø –ö–ù–û–ü–û–ö –£–ü–†–ê–í–õ–ï–ù–ò–Ø === */
        .control-button:hover {
            transform: scale(1.1) translateY(-2px);  /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏ –ø–æ–¥–Ω–∏–º–∞–µ–º */
            box-shadow: 0 8px 15px rgba(76, 175, 80, 0.4);  /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–µ–Ω—å */
        }

        .control-button:active {
            transform: scale(0.95);  /* —É–º–µ–Ω—å—à–∞–µ–º –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ */
            box-shadow: 0 3px 6px rgba(76, 175, 80, 0.3);  /* —É–º–µ–Ω—å—à–∞–µ–º —Ç–µ–Ω—å */
        }

        /* === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–ù–û–ü–ö–ò === */
        .action-buttons {
            display: flex;          /* —Ñ–ª–µ–∫—Å–±–æ–∫—Å –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            gap: 15px;              /* –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            justify-content: center; /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            margin-top: 15px;       /* –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
            flex-wrap: wrap;        /* –ø–µ—Ä–µ–Ω–æ—Å–∏–º –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
        }

        .action-button {
            padding: 12px 24px;     /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            border: none;           /* —É–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É */
            border-radius: 25px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            background: linear-gradient(45deg, #2196F3, #21CBF3);  /* —Å–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            color: white;           /* –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            font-size: 1em;         /* —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            cursor: pointer;        /* –∫—É—Ä—Å–æ—Ä-—É–∫–∞–∑–∞—Ç–µ–ª—å */
            transition: all 0.3s ease;  /* –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
            box-shadow: 0 5px 10px rgba(33, 150, 243, 0.3);  /* —Ç–µ–Ω—å */
            font-family: inherit;   /* –Ω–∞—Å–ª–µ–¥—É–µ–º —à—Ä–∏—Ñ—Ç */
        }

        .action-button:hover {
            transform: translateY(-3px);  /* –ø–æ–¥–Ω–∏–º–∞–µ–º –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            box-shadow: 0 8px 15px rgba(33, 150, 243, 0.4);  /* —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–µ–Ω—å */
        }

        .action-button.restart {
            background: linear-gradient(45deg, #f44336, #FF5722);  /* –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ */
        }

        /* === –°–û–û–ë–©–ï–ù–ò–Ø –ò–ì–†–´ === */
        .message {
            position: fixed;        /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è */
            top: 50%;               /* –ø–æ —Ü–µ–Ω—Ç—Ä—É –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
            left: 50%;              /* –ø–æ —Ü–µ–Ω—Ç—Ä—É –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ */
            transform: translate(-50%, -50%);  /* —Ç–æ—á–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
            background: rgba(0, 0, 0, 0.9);   /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω */
            color: white;           /* –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
            padding: 30px 50px;     /* –±–æ–ª—å—à–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
            border-radius: 20px;    /* —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            font-size: 1.5em;       /* —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            text-align: center;     /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            z-index: 2000;          /* –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            backdrop-filter: blur(15px);  /* —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);  /* –±–æ–ª—å—à–∞—è —Ç–µ–Ω—å */
            animation: messageSlideIn 0.5s ease-out;  /* –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
            max-width: 90%;         /* –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            white-space: pre-line;  /* —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ */
            border: 2px solid rgba(76, 175, 80, 0.5);  /* –∑–µ–ª–µ–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* === –ò–ù–î–ò–ö–ê–¢–û–† –ü–ê–£–ó–´ === */
        .pause-indicator {
            position: fixed;
            top: 120px;
            right: 30px;
            background: rgba(255, 152, 0, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            font-weight: bold;
            z-index: 1500;
            animation: pauseBlink 1s ease-in-out infinite alternate;
        }

        @keyframes pauseBlink {
            from { opacity: 0.7; }
            to { opacity: 1; }
        }

        /* === –ê–î–ê–ü–¢–ò–í–ù–´–ô –î–ò–ó–ê–ô–ù –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• === */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2.5em;    /* —É–º–µ–Ω—å—à–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
            }
            
            .score-panel {
                gap: 20px;          /* –º–µ–Ω—å—à–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤ */
                padding: 10px 20px; /* –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤ */
            }
            
            #gameCanvas {
                width: 300px !important;  /* –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
                height: 300px !important;
            }
            
            .controls-panel {
                padding: 15px;      /* –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤ */
            }
            
            .control-button {
                width: 45px;        /* –º–µ–Ω—å—à–µ –∫–Ω–æ–ø–∫–∏ */
                height: 45px;
                font-size: 1.5em;
            }
        }

        @media (max-width: 480px) {
            .game-header {
                margin-bottom: 20px;
            }
            
            .score-panel {
                gap: 15px;
            }
            
            #gameCanvas {
                width: 250px !important;
                height: 250px !important;
            }
        }
    </style>
</head>
<body>
    <!-- –ö–ù–û–ü–ö–ê –í–û–ó–í–†–ê–¢–ê –ù–ê –ì–õ–ê–í–ù–£–Æ –°–¢–†–ê–ù–ò–¶–£ -->
    <button class="home-button" onclick="location.href='../index.html'" title="–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é">üè†</button>

    <!-- –ò–ù–î–ò–ö–ê–¢–û–† –ü–ê–£–ó–´ (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
    <div class="pause-indicator" id="pauseIndicator" style="display: none;">
        ‚è∏Ô∏è –ü–ê–£–ó–ê
    </div>

    <!-- –ó–ê–ì–û–õ–û–í–û–ö –ò–ì–†–´ -->
    <div class="game-header">
        <h1 class="game-title">üêç –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ó–º–µ–π–∫–∞</h1>
        <p class="game-subtitle">–°–æ–±–∏—Ä–∞–π –µ–¥—É, —Ä–∞—Å—Ç–∏ –∏ –Ω–µ –≤—Ä–µ–∑–∞–π—Å—è!</p>
    </div>

    <!-- –ü–ê–ù–ï–õ–¨ –°–ß–ï–¢–ê -->
    <div class="score-panel">
        <div class="score-item">
            <span class="score-label">üèÜ –û—á–∫–∏</span>
            <span class="score-value" id="scoreValue">0</span>
        </div>
        <div class="score-item">
            <span class="score-label">üìè –î–ª–∏–Ω–∞</span>
            <span class="score-value" id="lengthValue">1</span>
        </div>
        <div class="score-item">
            <span class="score-label">‚ö° –°–∫–æ—Ä–æ—Å—Ç—å</span>
            <span class="score-value" id="speedValue">1</span>
        </div>
        <div class="score-item">
            <span class="score-label">üèÖ –†–µ–∫–æ—Ä–¥</span>
            <span class="score-value" id="highScore">0</span>
        </div>
    </div>

    <!-- –ò–ì–†–û–í–û–ï –ü–û–õ–ï -->
    <div class="game-container">
        <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
    <div class="controls-panel">
        <div class="controls-title">üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        
        <!-- –ö–ù–û–ü–ö–ò –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ô -->
        <div class="control-buttons">
            <button class="control-button up" onclick="changeDirection('up')" title="–í–≤–µ—Ä—Ö (W –∏–ª–∏ ‚Üë)">‚Üë</button>
            <button class="control-button down" onclick="changeDirection('down')" title="–í–Ω–∏–∑ (S –∏–ª–∏ ‚Üì)">‚Üì</button>
            <button class="control-button left" onclick="changeDirection('left')" title="–í–ª–µ–≤–æ (A –∏–ª–∏ ‚Üê)">‚Üê</button>
            <button class="control-button right" onclick="changeDirection('right')" title="–í–ø—Ä–∞–≤–æ (D –∏–ª–∏ ‚Üí)">‚Üí</button>
            <button class="control-button pause" onclick="togglePause()" title="–ü–∞—É–∑–∞ (–ü—Ä–æ–±–µ–ª)">‚è∏Ô∏è</button>
        </div>
        
        <!-- –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–ù–û–ü–ö–ò -->
        <div class="action-buttons">
            <button class="action-button restart" onclick="restartGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="action-button" onclick="showInstructions()">‚ùì –ü—Ä–∞–≤–∏–ª–∞</button>
        </div>
        
        <div style="margin-top: 15px; color: rgba(255, 255, 255, 0.7); font-size: 0.9em;">
            üí° –ò—Å–ø–æ–ª—å–∑—É–π WASD –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∏ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è ‚Ä¢ –ü—Ä–æ–±–µ–ª –¥–ª—è –ø–∞—É–∑—ã
        </div>
    </div>

    <!-- üöÄ JAVASCRIPT - –õ–û–ì–ò–ö–ê –ò–ì–†–´ -->
    <script>
        // === –ü–û–õ–£–ß–ï–ù–ò–ï –≠–õ–ï–ú–ï–ù–¢–û–í ===
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');  // –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è 2D
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const scoreElement = document.getElementById('scoreValue');
        const lengthElement = document.getElementById('lengthValue');
        const speedElement = document.getElementById('speedValue');
        const highScoreElement = document.getElementById('highScore');
        const pauseIndicator = document.getElementById('pauseIndicator');

        // === –ö–û–ù–°–¢–ê–ù–¢–´ –ò–ì–†–´ ===
        const GRID_SIZE = 20;    // —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏ —Å–µ—Ç–∫–∏ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
        const CANVAS_SIZE = 400; // —Ä–∞–∑–º–µ—Ä —Ö–æ–ª—Å—Ç–∞ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
        const GRID_COUNT = CANVAS_SIZE / GRID_SIZE; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫ –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω–µ (20x20)

        // === –ü–ï–†–ï–ú–ï–ù–ù–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø –ò–ì–†–´ ===
        let snake = [{ x: 10, y: 10 }]; // –∑–º–µ–π–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ
        let direction = { x: 0, y: 0 }; // –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (–Ω–∞—á–∏–Ω–∞–µ–º –Ω–µ–ø–æ–¥–≤–∏–∂–Ω–æ)
        let food = generateFood();       // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –µ–¥—É
        let score = 0;                  // —Ç–µ–∫—É—â–∏–µ –æ—á–∫–∏
        let gameRunning = false;        // –∑–∞–ø—É—â–µ–Ω–∞ –ª–∏ –∏–≥—Ä–∞
        let gameLoop = null;            // –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
        let isPaused = false;           // –Ω–∞ –ø–∞—É–∑–µ –ª–∏ –∏–≥—Ä–∞
        let gameSpeed = 200;            // —Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä—ã –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (—á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ)
        let speedLevel = 1;             // —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏

        // === –ó–ê–ì–†–£–ó–ö–ê –†–ï–ö–û–†–î–ê ===
        let highScore = parseInt(localStorage.getItem('snakeHighScore')) || 0;
        highScoreElement.textContent = highScore;

        // === –§–£–ù–ö–¶–ò–Ø –ì–ï–ù–ï–†–ê–¶–ò–ò –ï–î–´ ===
        function generateFood() {
            let newFood;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –µ–¥—ã, –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–º —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
            do {
                newFood = {
                    x: Math.floor(Math.random() * GRID_COUNT), // —Å–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è X (0-19)
                    y: Math.floor(Math.random() * GRID_COUNT)  // —Å–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è Y (0-19)
                };
            } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
            // –ü–æ–≤—Ç–æ—Ä—è–µ–º, –ø–æ–∫–∞ –µ–¥–∞ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–≤–æ–±–æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–µ –Ω–∞ –∑–º–µ–π–∫–µ)
            
            console.log(`üçé –ï–¥–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –ø–æ–∑–∏—Ü–∏–∏ (${newFood.x}, ${newFood.y})`);
            return newFood;
        }

        // === –§–£–ù–ö–¶–ò–Ø –†–ò–°–û–í–ê–ù–ò–Ø ===
        function draw() {
            // –û—á–∏—â–∞–µ–º –≤–µ—Å—å —Ö–æ–ª—Å—Ç —Ç–µ–º–Ω—ã–º —Ü–≤–µ—Ç–æ–º
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);
            
            // –†–∏—Å—É–µ–º —Å–µ—Ç–∫—É (–¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã –∏ –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è)
            drawGrid();
            
            // –†–∏—Å—É–µ–º –µ–¥—É
            drawFood();
            
            // –†–∏—Å—É–µ–º –∑–º–µ–π–∫—É
            drawSnake();
        }

        // === –§–£–ù–ö–¶–ò–Ø –†–ò–°–û–í–ê–ù–ò–Ø –°–ï–¢–ö–ò ===
        function drawGrid() {
            ctx.strokeStyle = 'rgba(76, 175, 80, 0.1)'; // –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π
            ctx.lineWidth = 1;
            
            // –†–∏—Å—É–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
            for (let x = 0; x <= CANVAS_SIZE; x += GRID_SIZE) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, CANVAS_SIZE);
                ctx.stroke();
            }
            
            // –†–∏—Å—É–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
            for (let y = 0; y <= CANVAS_SIZE; y += GRID_SIZE) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(CANVAS_SIZE, y);
                ctx.stroke();
            }
        }

        // === –§–£–ù–ö–¶–ò–Ø –†–ò–°–û–í–ê–ù–ò–Ø –ï–î–´ ===
        function drawFood() {
            // –†–∏—Å—É–µ–º –µ–¥—É –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
            const gradient = ctx.createRadialGradient(
                food.x * GRID_SIZE + GRID_SIZE / 2, food.y * GRID_SIZE + GRID_SIZE / 2, 0,
                food.x * GRID_SIZE + GRID_SIZE / 2, food.y * GRID_SIZE + GRID_SIZE / 2, GRID_SIZE / 2
            );
            gradient.addColorStop(0, '#ff6b6b');    // —Å–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π –≤ —Ü–µ–Ω—Ç—Ä–µ
            gradient.addColorStop(1, '#c0392b');    // —Ç–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π –ø–æ –∫—Ä–∞—è–º
            
            ctx.fillStyle = gradient;
            ctx.fillRect(
                food.x * GRID_SIZE + 2,     // –ø–æ–∑–∏—Ü–∏—è X —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ—Ç—Å—Ç—É–ø–æ–º
                food.y * GRID_SIZE + 2,     // –ø–æ–∑–∏—Ü–∏—è Y —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ—Ç—Å—Ç—É–ø–æ–º
                GRID_SIZE - 4,              // —à–∏—Ä–∏–Ω–∞ (–º–µ–Ω—å—à–µ –Ω–∞ 4 –ø–∏–∫—Å–µ–ª—è –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤)
                GRID_SIZE - 4               // –≤—ã—Å–æ—Ç–∞ (–º–µ–Ω—å—à–µ –Ω–∞ 4 –ø–∏–∫—Å–µ–ª—è –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤)
            );
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –µ–¥—ã
            ctx.shadowColor = '#ff6b6b';
            ctx.shadowBlur = 10;
            ctx.fillRect(
                food.x * GRID_SIZE + 2,
                food.y * GRID_SIZE + 2,
                GRID_SIZE - 4,
                GRID_SIZE - 4
            );
            ctx.shadowBlur = 0; // –æ—Ç–∫–ª—é—á–∞–µ–º —Ç–µ–Ω—å –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        }

        // === –§–£–ù–ö–¶–ò–Ø –†–ò–°–û–í–ê–ù–ò–Ø –ó–ú–ï–ô–ö–ò ===
        function drawSnake() {
            snake.forEach((segment, index) => {
                let segmentColor;
                
                // –ì–æ–ª–æ–≤–∞ –∑–º–µ–π–∫–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ø–æ —Ü–≤–µ—Ç—É
                if (index === 0) {
                    // –ì–æ–ª–æ–≤–∞ - —è—Ä–∫–æ-–∑–µ–ª–µ–Ω–∞—è —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
                    const gradient = ctx.createRadialGradient(
                        segment.x * GRID_SIZE + GRID_SIZE / 2, segment.y * GRID_SIZE + GRID_SIZE / 2, 0,
                        segment.x * GRID_SIZE + GRID_SIZE / 2, segment.y * GRID_SIZE + GRID_SIZE / 2, GRID_SIZE / 2
                    );
                    gradient.addColorStop(0, '#8BC34A');    // —Å–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π –≤ —Ü–µ–Ω—Ç—Ä–µ
                    gradient.addColorStop(1, '#4CAF50');    // —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π –ø–æ –∫—Ä–∞—è–º
                    segmentColor = gradient;
                } else {
                    // –¢–µ–ª–æ - —Ç–µ–º–Ω–µ–µ –∫ —Ö–≤–æ—Å—Ç—É
                    const intensity = 1 - (index / snake.length) * 0.5; // –∑–∞—Ç–µ–º–Ω—è–µ–º –∫ —Ö–≤–æ—Å—Ç—É
                    segmentColor = `rgba(76, 175, 80, ${intensity})`;
                }
                
                ctx.fillStyle = segmentColor;
                ctx.fillRect(
                    segment.x * GRID_SIZE + 1,  // –ø–æ–∑–∏—Ü–∏—è X —Å –æ—Ç—Å—Ç—É–ø–æ–º
                    segment.y * GRID_SIZE + 1,  // –ø–æ–∑–∏—Ü–∏—è Y —Å –æ—Ç—Å—Ç—É–ø–æ–º
                    GRID_SIZE - 2,              // —à–∏—Ä–∏–Ω–∞ (–º–µ–Ω—å—à–µ –Ω–∞ 2 –ø–∏–∫—Å–µ–ª—è –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞)
                    GRID_SIZE - 2               // –≤—ã—Å–æ—Ç–∞ (–º–µ–Ω—å—à–µ –Ω–∞ 2 –ø–∏–∫—Å–µ–ª—è –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞)
                );
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–∞–∑–∞ –≥–æ–ª–æ–≤–µ –∑–º–µ–π–∫–∏
                if (index === 0) {
                    drawSnakeEyes(segment);
                }
            });
        }

        // === –§–£–ù–ö–¶–ò–Ø –†–ò–°–û–í–ê–ù–ò–Ø –ì–õ–ê–ó –ó–ú–ï–ô–ö–ò ===
        function drawSnakeEyes(head) {
            ctx.fillStyle = 'white';
            const eyeSize = 3;
            const eyeOffsetX = 5;
            const eyeOffsetY = 6;
            
            // –†–∏—Å—É–µ–º –¥–≤–∞ –±–µ–ª—ã—Ö –∫—Ä—É–≥–∞ –¥–ª—è –≥–ª–∞–∑
            ctx.beginPath();
            ctx.arc(
                head.x * GRID_SIZE + eyeOffsetX, 
                head.y * GRID_SIZE + eyeOffsetY, 
                eyeSize, 0, 2 * Math.PI
            );
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(
                head.x * GRID_SIZE + GRID_SIZE - eyeOffsetX, 
                head.y * GRID_SIZE + eyeOffsetY, 
                eyeSize, 0, 2 * Math.PI
            );
            ctx.fill();
            
            // –†–∏—Å—É–µ–º —á–µ—Ä–Ω—ã–µ –∑—Ä–∞—á–∫–∏
            ctx.fillStyle = 'black';
            const pupilSize = 1.5;
            
            ctx.beginPath();
            ctx.arc(
                head.x * GRID_SIZE + eyeOffsetX, 
                head.y * GRID_SIZE + eyeOffsetY, 
                pupilSize, 0, 2 * Math.PI
            );
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(
                head.x * GRID_SIZE + GRID_SIZE - eyeOffsetX, 
                head.y * GRID_SIZE + eyeOffsetY, 
                pupilSize, 0, 2 * Math.PI
            );
            ctx.fill();
        }

        // === –§–£–ù–ö–¶–ò–Ø –î–í–ò–ñ–ï–ù–ò–Ø –ó–ú–ï–ô–ö–ò ===
        function moveSnake() {
            if (isPaused || !gameRunning) return; // –Ω–µ –¥–≤–∏–≥–∞–µ–º—Å—è –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–∞ –ø–∞—É–∑–µ –∏–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É –∑–º–µ–π–∫–∏
            const head = { ...snake[0] }; // –∫–æ–ø–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –≥–æ–ª–æ–≤—É
            head.x += direction.x; // –¥–æ–±–∞–≤–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –ø–æ X
            head.y += direction.y; // –¥–æ–±–∞–≤–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –ø–æ Y
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
            snake.unshift(head);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—ä–µ–ª–∞ –ª–∏ –∑–º–µ–π–∫–∞ –µ–¥—É
            if (head.x === food.x && head.y === food.y) {
                // –ï–¥–∞ —Å—ä–µ–¥–µ–Ω–∞!
                score += 10; // –¥–æ–±–∞–≤–ª—è–µ–º –æ—á–∫–∏
                food = generateFood(); // –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –µ–¥—É
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–∂–¥—ã–µ 50 –æ—á–∫–æ–≤
                if (score % 50 === 0 && gameSpeed > 100) {
                    gameSpeed -= 20; // —É–º–µ–Ω—å—à–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª (—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å)
                    speedLevel++;
                    
                    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª —Å –Ω–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
                    if (gameLoop) clearInterval(gameLoop);
                    gameLoop = setInterval(gameStep, gameSpeed);
                    
                    console.log(`‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞! –£—Ä–æ–≤–µ–Ω—å ${speedLevel}, –∏–Ω—Ç–µ—Ä–≤–∞–ª ${gameSpeed}–º—Å`);
                }
                
                console.log(`üçé –ï–¥–∞ —Å—ä–µ–¥–µ–Ω–∞! –û—á–∫–∏: ${score}, –¥–ª–∏–Ω–∞ –∑–º–µ–π–∫–∏: ${snake.length + 1}`);
            } else {
                // –ï–¥–∞ –Ω–µ —Å—ä–µ–¥–µ–Ω–∞, —É–±–∏—Ä–∞–µ–º —Ö–≤–æ—Å—Ç (–∑–º–µ–π–∫–∞ –Ω–µ —Ä–∞—Å—Ç–µ—Ç)
                snake.pop();
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–ª–∏–∑–∏–∏
            if (checkCollisions(head)) {
                gameOver();
                return;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
            updateUI();
        }

        // === –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –°–¢–û–õ–ö–ù–û–í–ï–ù–ò–ô ===
        function checkCollisions(head) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ —Å—Ç–µ–Ω–∞–º–∏
            if (head.x < 0 || head.x >= GRID_COUNT || head.y < 0 || head.y >= GRID_COUNT) {
                console.log('üí• –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–æ–π!');
                return true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å —Å–∞–º–æ–π —Å–æ–±–æ–π (–∏—Å–∫–ª—é—á–∞—è –≥–æ–ª–æ–≤—É)
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    console.log('üí• –ó–º–µ–π–∫–∞ —É–∫—É—Å–∏–ª–∞ —Å–µ–±—è!');
                    return true;
                }
            }
            
            return false; // —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –Ω–µ—Ç
        }

        // === –û–°–ù–û–í–ù–û–ô –ò–ì–†–û–í–û–ô –¶–ò–ö–õ ===
        function gameStep() {
            moveSnake();  // –¥–≤–∏–≥–∞–µ–º –∑–º–µ–π–∫—É
            draw();       // –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
        }

        // === –§–£–ù–ö–¶–ò–Ø –°–ú–ï–ù–´ –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø ===
        function changeDirection(newDirection) {
            if (!gameRunning && direction.x === 0 && direction.y === 0) {
                // –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –∏ –∑–º–µ–π–∫–∞ —Å—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ, –∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
                startGame();
            }
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
            switch (newDirection) {
                case 'up':
                    if (direction.y !== 1) { // –Ω–µ –º–æ–∂–µ–º –∏–¥—Ç–∏ –≤–≤–µ—Ä—Ö, –µ—Å–ª–∏ –∏–¥–µ–º –≤–Ω–∏–∑
                        direction = { x: 0, y: -1 };
                        console.log('üîÑ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ: –≤–≤–µ—Ä—Ö');
                    }
                    break;
                case 'down':
                    if (direction.y !== -1) { // –Ω–µ –º–æ–∂–µ–º –∏–¥—Ç–∏ –≤–Ω–∏–∑, –µ—Å–ª–∏ –∏–¥–µ–º –≤–≤–µ—Ä—Ö
                        direction = { x: 0, y: 1 };
                        console.log('üîÑ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ: –≤–Ω–∏–∑');
                    }
                    break;
                case 'left':
                    if (direction.x !== 1) { // –Ω–µ –º–æ–∂–µ–º –∏–¥—Ç–∏ –≤–ª–µ–≤–æ, –µ—Å–ª–∏ –∏–¥–µ–º –≤–ø—Ä–∞–≤–æ
                        direction = { x: -1, y: 0 };
                        console.log('üîÑ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ: –≤–ª–µ–≤–æ');
                    }
                    break;
                case 'right':
                    if (direction.x !== -1) { // –Ω–µ –º–æ–∂–µ–º –∏–¥—Ç–∏ –≤–ø—Ä–∞–≤–æ, –µ—Å–ª–∏ –∏–¥–µ–º –≤–ª–µ–≤–æ
                        direction = { x: 1, y: 0 };
                        console.log('üîÑ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ: –≤–ø—Ä–∞–≤–æ');
                    }
                    break;
            }
        }

        // === –§–£–ù–ö–¶–ò–Ø –°–¢–ê–†–¢–ê –ò–ì–†–´ ===
        function startGame() {
            if (gameRunning) return; // –∏–≥—Ä–∞ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞
            
            gameRunning = true;
            isPaused = false;
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            gameLoop = setInterval(gameStep, gameSpeed);
            
            console.log('üéÆ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!');
            
            // –ï—Å–ª–∏ –∑–º–µ–π–∫–∞ –µ—â–µ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è, —É—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            if (direction.x === 0 && direction.y === 0) {
                direction = { x: 1, y: 0 }; // –Ω–∞—á–∏–Ω–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ
            }
        }

        // === –§–£–ù–ö–¶–ò–Ø –ü–ê–£–ó–´/–í–û–ó–û–ë–ù–û–í–õ–ï–ù–ò–Ø –ò–ì–†–´ ===
        function togglePause() {
            if (!gameRunning) {
                // –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –µ–µ
                startGame();
                return;
            }
            
            isPaused = !isPaused;
            
            if (isPaused) {
                // –°—Ç–∞–≤–∏–º –Ω–∞ –ø–∞—É–∑—É
                if (gameLoop) clearInterval(gameLoop);
                pauseIndicator.style.display = 'block';
                console.log('‚è∏Ô∏è –ò–≥—Ä–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
            } else {
                // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä—É
                gameLoop = setInterval(gameStep, gameSpeed);
                pauseIndicator.style.display = 'none';
                console.log('‚ñ∂Ô∏è –ò–≥—Ä–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞');
            }
        }

        // === –§–£–ù–ö–¶–ò–Ø –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê –ò–ì–†–´ ===
        function restartGame() {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∏–≥—Ä—É
            if (gameLoop) clearInterval(gameLoop);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
            snake = [{ x: 10, y: 10 }]; // –∑–º–µ–π–∫–∞ –∏–∑ –æ–¥–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ
            direction = { x: 0, y: 0 }; // –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ
            food = generateFood();       // –Ω–æ–≤–∞—è –µ–¥–∞
            score = 0;                  // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—á–∫–∏
            gameRunning = false;        // –∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞
            isPaused = false;           // –Ω–µ –Ω–∞ –ø–∞—É–∑–µ
            gameSpeed = 200;            // –Ω–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
            speedLevel = 1;             // –ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–∞—É–∑—ã
            pauseIndicator.style.display = 'none';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω
            updateUI();
            draw();
            
            console.log('üîÑ –ò–≥—Ä–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞!');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            showMessage('üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞!\n\n–ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–µ–ª–∫–∏ –∏–ª–∏ WASD –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è\n–ü—Ä–æ–±–µ–ª –¥–ª—è –ø–∞—É–∑—ã', 2000);
        }

        // === –§–£–ù–ö–¶–ò–Ø –û–ö–û–ù–ß–ê–ù–ò–Ø –ò–ì–†–´ ===
        function gameOver() {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
            gameRunning = false;
            isPaused = false;
            if (gameLoop) clearInterval(gameLoop);
            pauseIndicator.style.display = 'none';
            
            console.log(`üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—á–µ—Ç: ${score}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ—Ä–¥
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('snakeHighScore', highScore.toString());
                highScoreElement.textContent = highScore;
                
                showMessage(
                    `üéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!\n\n` +
                    `üèÜ –û—á–∫–∏: ${score}\n` +
                    `üìè –î–ª–∏–Ω–∞: ${snake.length}\n` +
                    `‚ö° –£—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏: ${speedLevel}\n\n` +
                    `üîÑ –ù–∞–∂–º–∏ "–ù–æ–≤–∞—è –∏–≥—Ä–∞" —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑!`,
                    5000
                );
            } else {
                showMessage(
                    `üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!\n\n` +
                    `üèÜ –û—á–∫–∏: ${score}\n` +
                    `üìè –î–ª–∏–Ω–∞: ${snake.length}\n` +
                    `‚ö° –£—Ä–æ–≤–µ–Ω—å —Å–∫–æ—Ä–æ—Å—Ç–∏: ${speedLevel}\n\n` +
                    `ü•á –†–µ–∫–æ—Ä–¥: ${highScore}\n\n` +
                    `üîÑ –ù–∞–∂–º–∏ "–ù–æ–≤–∞—è –∏–≥—Ä–∞" —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑!`,
                    5000
                );
            }
        }

        // === –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê ===
        function updateUI() {
            scoreElement.textContent = score;
            lengthElement.textContent = snake.length;
            speedElement.textContent = speedLevel;
        }

        // === –§–£–ù–ö–¶–ò–Ø –ü–û–ö–ê–ó–ê –°–û–û–ë–©–ï–ù–ò–ô ===
        function showMessage(text, duration = 3000) {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
            const existingMessage = document.querySelector('.message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const message = document.createElement('div');
            message.className = 'message';
            message.textContent = text;
            
            document.body.appendChild(message);
            
            // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
            setTimeout(() => {
                if (message.parentNode) {
                    message.remove();
                }
            }, duration);
        }

        // === –§–£–ù–ö–¶–ò–Ø –ü–û–ö–ê–ó–ê –ü–†–ê–í–ò–õ ===
        function showInstructions() {
            showMessage(
                `üêç –ü–†–ê–í–ò–õ–ê –ò–ì–†–´ –ó–ú–ï–ô–ö–ê:\n\n` +
                `üéØ –¶–µ–ª—å: —Å–æ–±–∏—Ä–∞–π –∫—Ä–∞—Å–Ω—É—é –µ–¥—É –∏ —Ä–∞—Å—Ç–∏!\n\n` +
                `üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:\n` +
                `‚Ä¢ –°—Ç—Ä–µ–ª–∫–∏ –∏–ª–∏ WASD - –¥–≤–∏–∂–µ–Ω–∏–µ\n` +
                `‚Ä¢ –ü—Ä–æ–±–µ–ª - –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ\n\n` +
                `‚ö†Ô∏è –ù–µ –≤—Ä–µ–∑–∞–π—Å—è:\n` +
                `‚Ä¢ –í —Å—Ç–µ–Ω—ã –ø–æ–ª—è\n` +
                `‚Ä¢ –í —Å–≤–æ–π —Ö–≤–æ—Å—Ç\n\n` +
                `‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 50 –æ—á–∫–æ–≤!\n\n` +
                `üèÜ –ü–æ–ø—Ä–æ–±—É–π –ø–æ–±–∏—Ç—å —Å–≤–æ–π —Ä–µ–∫–æ—Ä–¥!`,
                7000
            );
        }

        // === –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ê–í–ò–® ===
        document.addEventListener('keydown', (event) => {
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—Ä–µ–ª–∫–∞–º–∏
            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Space'].includes(event.code)) {
                event.preventDefault();
            }
            
            switch (event.code) {
                // –î–≤–∏–∂–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
                case 'ArrowUp':
                case 'KeyW':
                    changeDirection('up');
                    break;
                case 'ArrowDown':
                case 'KeyS':
                    changeDirection('down');
                    break;
                case 'ArrowLeft':
                case 'KeyA':
                    changeDirection('left');
                    break;
                case 'ArrowRight':
                case 'KeyD':
                    changeDirection('right');
                    break;
                
                // –ü–∞—É–∑–∞
                case 'Space':
                    togglePause();
                    break;
                    
                // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
                case 'KeyR':
                    if (confirm('üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É?')) {
                        restartGame();
                    }
                    break;
                
                // –ü—Ä–∞–≤–∏–ª–∞
                case 'KeyH':
                    showInstructions();
                    break;
            }
        });

        // === –û–ë–†–ê–ë–û–¢–ö–ê TOUCH –°–û–ë–´–¢–ò–ô –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• ===
        let touchStartX = 0;
        let touchStartY = 0;
        
        canvas.addEventListener('touchstart', (event) => {
            event.preventDefault();
            const touch = event.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
        });
        
        canvas.addEventListener('touchend', (event) => {
            event.preventDefault();
            
            if (!touchStartX || !touchStartY) return;
            
            const touch = event.changedTouches[0];
            const touchEndX = touch.clientX;
            const touchEndY = touch.clientY;
            
            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–∞–π–ø–∞
            if (Math.abs(diffX) > Math.abs(diffY)) {
                // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
                if (diffX > 0) {
                    changeDirection('left');
                } else {
                    changeDirection('right');
                }
            } else {
                // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–≤–∞–π–ø
                if (diffY > 0) {
                    changeDirection('up');
                } else {
                    changeDirection('down');
                }
            }
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            touchStartX = 0;
            touchStartY = 0;
        });

        // === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ CANVAS ===
        function resizeCanvas() {
            const container = document.querySelector('.game-container');
            const containerWidth = container.clientWidth - 40; // —É—á–∏—Ç—ã–≤–∞–µ–º padding
            
            if (window.innerWidth <= 768) {
                // –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —É–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä
                const size = Math.min(containerWidth, 300);
                canvas.width = size;
                canvas.height = size;
                canvas.style.width = size + 'px';
                canvas.style.height = size + 'px';
            } else {
                // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä
                canvas.width = 400;
                canvas.height = 400;
                canvas.style.width = '400px';
                canvas.style.height = '400px';
            }
            
            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
            draw();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', resizeCanvas);

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´ ===
        window.addEventListener('load', () => {
            console.log('üéÆ –ó–º–µ–π–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
            console.log('üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: WASD –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∏, –ü—Ä–æ–±–µ–ª - –ø–∞—É–∑–∞');
            console.log('üîß –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏!');
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä canvas
            resizeCanvas();
            
            // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
            updateUI();
            draw();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            setTimeout(() => {
                showMessage(
                    'üêç –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ó–º–µ–π–∫—É!\n\n' +
                    'üéØ –°–æ–±–∏—Ä–∞–π –∫—Ä–∞—Å–Ω—É—é –µ–¥—É –∏ —Ä–∞—Å—Ç–∏\n' +
                    '‚ö†Ô∏è –ù–µ –≤—Ä–µ–∑–∞–π—Å—è –≤ —Å—Ç–µ–Ω—ã –∏ —Å–≤–æ–π —Ö–≤–æ—Å—Ç\n\n' +
                    'üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:\n' +
                    '‚Ä¢ WASD –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∏ - –¥–≤–∏–∂–µ–Ω–∏–µ\n' +
                    '‚Ä¢ –ü—Ä–æ–±–µ–ª - –ø–∞—É–∑–∞\n' +
                    '‚Ä¢ –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º - —Å–≤–∞–π–ø—ã –ø–æ —ç–∫—Ä–∞–Ω—É\n\n' +
                    'üöÄ –ù–∞—á–Ω–∏ –¥–≤–∏–∂–µ–Ω–∏–µ —á—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å!',
                    6000
                );
            }, 1000);
        });

        // === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –û–¢–õ–ê–î–ö–ò ===
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ (–º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏)
        function setSpeed(speed) {
            if (speed >= 50 && speed <= 500) {
                gameSpeed = speed;
                if (gameLoop && gameRunning && !isPaused) {
                    clearInterval(gameLoop);
                    gameLoop = setInterval(gameStep, gameSpeed);
                }
                console.log(`‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ${speed}–º—Å`);
            } else {
                console.log('‚ùå –°–∫–æ—Ä–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 50 –¥–æ 500 –º—Å');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ (—á–∏—Ç–µ—Ä—Å—Ç–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
        function addScore(points) {
            score += points;
            updateUI();
            console.log(`üèÜ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—á–∫–æ–≤: ${points}, –≤—Å–µ–≥–æ: ${score}`);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –µ–¥—ã –∫ –≥–æ–ª–æ–≤–µ –∑–º–µ–π–∫–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–æ—Å—Ç–∞)
        function feedSnake() {
            food = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
            console.log('üçé –ï–¥–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫ –∑–º–µ–π–∫–µ');
        }
        
        // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
        window.setSpeed = setSpeed;
        window.addScore = addScore;
        window.feedSnake = feedSnake;
    </script>
</body>
</html>
